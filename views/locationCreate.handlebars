<form class="container location-create-form">
    <div class="field">
        <label class="label">Location Name</label>
        <div class="control">
            <input class="input" type="text" id="location-title" placeholder="Title">
        </div>
    </div>
    <div class="field">
        <label class="label" id="descriptionBlock">City Name</label>
        <div class="control">
            <input class="input" type="text" id="location-city" placeholder="City"></input>
        </div>
    </div>
    <div class="field">
        <label class="label" id="descriptionBlock">Description</label>
        <div class="control">
            <textarea class="textarea" type="text" id="location-description" placeholder="Description"></textarea>
        </div>
    </div>
    <div>
        {{!-- <form id="form"> --}}
            <input class="label" type="file" id="file"></input>
            {{!--
        </form> --}}
        {{!-- <button class="button" id="image upload">Upload image</button> --}}
        <button class="button" id="image-upload">Upload image</button>
    </div>
    <div class="field">
        <button class="button" id="create" type="submit">Create</button>
    </div>
</form>

<script src="./js/locationCreate.js"></script>

{{!-- Javascript upload file to the location create handlebars: --}}

<script>
    const form = document.getElementById('form');

    form.addEventListener('submit', function (event) {
        // Prevent default HTML page refresh
        event.preventDefault();

        // Select file upload element
        const uploadElement = document.getElementById('file');

        // Extract the file (for a single file, always 0 in the list)
        const file = uploadElement.files[0];

        // Create new formData object then append file
        const payload = new FormData();
        payload.append('CV', file, 'CV.pdf');

        // POST/PUT with Fetch API -- what address do we want to send this to? 
        fetch('/api/locations', {
            method: "POST", // or "PUT"
            body: payload,
            // No content-type! With FormData obect, Fetch API sets this automatically.
            // Doing so manually can lead to an error
        })
            .then(res => res.json())
            .then(data => console.log(data))
            .catch(err => console.log(err))
    });
</script>